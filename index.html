<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0a0a0f">
    <meta name="description" content="BTS COMEBACK MISSION - Hyung Line Streaming Competition Dashboard">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <title>BTS COMEBACK MISSION - HYUNG LINE EDITION</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ü≠‚ü¨</text></svg>">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Rajdhani:wght@300;400;500;600;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- Inline Critical CSS for Loading Screen -->
    <style>
        :root {
            --bg-dark: #0a0a0f;
            --purple-main: #7b2cbf;
            --purple-glow: #9d4edd;
            --text-main: #e0e0f0;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Rajdhani', sans-serif;
            background: var(--bg-dark);
            color: var(--text-main);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .loading-overlay {
            position: fixed;
            inset: 0;
            background: rgba(10, 10, 15, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }
        
        .loading-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .screen {
            display: none;
            min-height: 100vh;
        }
        
        .screen.active {
            display: flex;
        }
        
        /* Loader Animation */
        .loader { text-align: center; }
        
        .loader-ring {
            width: 60px; height: 60px;
            border: 3px solid transparent;
            border-top-color: var(--purple-glow);
            border-radius: 50%;
            margin: 0 auto 20px;
            animation: spin 1s linear infinite;
        }
        
        .loader-ring:nth-child(2) {
            width: 48px; height: 48px;
            margin-top: -54px;
            animation-delay: 0.15s;
            border-top-color: var(--purple-main);
        }
        
        .loader-ring:nth-child(3) {
            width: 36px; height: 36px;
            margin-top: -42px;
            animation-delay: 0.3s;
            border-top-color: #c77dff;
        }
        
        .loader p {
            font-family: 'Orbitron', monospace;
            font-size: 12px;
            letter-spacing: 3px;
            color: var(--purple-glow);
            margin-top: 30px;
            animation: pulse 1.5s ease-in-out infinite;
        }
        
        @keyframes spin { to { transform: rotate(360deg); } }
        @keyframes pulse { 0%, 100% { opacity: 0.5; } 50% { opacity: 1; } }
    </style>
</head>
<body>
    <!-- ==================== LOADING OVERLAY ==================== -->
    <div id="loading" class="loading-overlay">
        <div class="loader">
            <div class="loader-ring"></div>
            <div class="loader-ring"></div>
            <div class="loader-ring"></div>
            <p>ACCESSING DATABASE...</p>
        </div>
    </div>
    
    <!-- ==================== LOGIN SCREEN ==================== -->
    <div id="login-screen" class="screen active">
        <div class="login-container">
            <!-- Animated Background -->
            <div class="cyber-grid"></div>
            <div class="floating-particles" aria-hidden="true">
                <span></span><span></span><span></span><span></span><span></span>
            </div>
            
            <div class="login-content">
                <!-- Logo Section -->
                <div class="logo-section">
                    <div class="bts-logo" aria-label="BTS Logo">‚ü≠‚ü¨</div>
                    <h1 class="title">BTS COMEBACK MISSION</h1>
                    <p class="subtitle">HYUNG LINE EDITION</p>
                    <div class="scan-line" aria-hidden="true"></div>
                </div>

                <!-- Login Form -->
                <div class="login-box">
                    <form id="login-form" onsubmit="return false;">
                        <div class="input-group">
                            <label for="agent-input">
                                <span class="label-icon">üîë</span>
                                AGENT IDENTIFICATION
                            </label>
                            <div class="input-wrapper">
                                <input 
                                    type="text" 
                                    id="agent-input" 
                                    placeholder="Enter Agent Number (e.g., AGENT001)" 
                                    autocomplete="off"
                                    autocapitalize="characters"
                                    spellcheck="false"
                                >
                                <span class="input-icon">üë§</span>
                            </div>
                            <button type="submit" id="login-btn" class="btn-primary">
                                <span class="btn-glow"></span>
                                <span class="btn-text">ACCESS DASHBOARD</span>
                                <span class="btn-icon">‚Üí</span>
                            </button>
                        </div>
                    </form>

                    <div class="divider">
                        <span class="divider-line"></span>
                        <span class="divider-text">FORGOT YOUR ID?</span>
                        <span class="divider-line"></span>
                    </div>

                    <form id="find-form" onsubmit="return false;">
                        <div class="input-group">
                            <label for="instagram-input">
                                <span class="label-icon">üì±</span>
                                INSTAGRAM LOOKUP
                            </label>
                            <div class="input-wrapper">
                                <input 
                                    type="text" 
                                    id="instagram-input" 
                                    placeholder="Enter Instagram username..." 
                                    autocomplete="off"
                                    autocapitalize="none"
                                >
                                <span class="input-icon">@</span>
                            </div>
                            <button type="submit" id="find-btn" class="btn-secondary">
                                <span class="btn-text">FIND MY AGENT ID</span>
                                <span class="btn-icon">üîç</span>
                            </button>
                        </div>
                    </form>

                    <!-- Result Box -->
                    <div id="find-result" class="result-box" role="alert" aria-live="polite"></div>
                </div>

                <!-- Footer -->
                <div class="login-footer">
                    <div class="connection-status">
                        <div class="pulse-dot"></div>
                        <span>SECURE CONNECTION ESTABLISHED</span>
                    </div>
                    <div class="version-info">v3.1 | Hyung Line Edition</div>
                </div>
            </div>
        </div>
    </div>

<div class="sidebar-header">
    <div class="logo-container"> <!-- Main wrapper for icon + text -->
        <div class="logo-icon-bars"> <!-- Container for the vertical bars -->
            <span class="bar"></span>
            <span class="bar"></span>
        </div>
        <div class="logo-text-group"> <!-- Container for the two lines of text -->
            <span>BTS COMEBACK</span>
            <span class="dim">MISSION</span>
        </div>
    </div>
    <button id="close-sidebar" class="close-btn" aria-label="Close menu">‚úï</button>
</div>
            <!-- Agent Info Card -->
            <div class="agent-card">
                <div class="agent-avatar" id="agent-avatar" role="img" aria-label="Team avatar"></div>
                <div class="agent-details">
                    <div class="agent-name" id="agent-name">Agent</div>
                    <div class="agent-team" id="agent-team">Team</div>
                    <div class="agent-id" id="agent-id">ID: ---</div>
                </div>
            </div>

            <!-- Week Selector -->
            <div class="week-selector">
                <label for="week-select">
                    <span class="selector-icon">üìÖ</span>
                    MISSION WEEK
                </label>
                <div class="select-wrapper">
                    <select id="week-select" aria-label="Select week"></select>
                    <span class="select-arrow">‚ñº</span>
                </div>
            </div>

            <div class="nav-links">
                <!-- Navigation Menu -->
                <nav class="nav-menu" role="menubar">
                    <div class="nav-section">
                        <span class="nav-section-title">MAIN</span>
                        <a href="#" class="nav-link active" data-page="home" role="menuitem">
                            <span class="nav-icon">üè†</span><span class="nav-text">Mission Control</span>
                        </a>
                        <a href="#" class="nav-link" data-page="profile" role="menuitem">
                            <span class="nav-icon">üë§</span><span class="nav-text">Agent Profile</span>
                        </a>
                        <a href="#" class="nav-link" data-page="rankings" role="menuitem">
                            <span class="nav-icon">üèÜ</span><span class="nav-text">Rankings</span>
                        </a>
                    </div>
                    
                    <div class="nav-section">
                        <span class="nav-section-title">MISSIONS</span>
                        <a href="#" class="nav-link" data-page="goals" role="menuitem">
                            <span class="nav-icon">üéØ</span><span class="nav-text">Goals Progress</span>
                        </a>
                        <a href="#" class="nav-link" data-page="album2x" role="menuitem">
                            <span class="nav-icon">üíø</span><span class="nav-text">Album 2X Mission</span>
                        </a>
                        <a href="#" class="nav-link" data-page="secret-missions" role="menuitem">
                            <span class="nav-icon">üîí</span><span class="nav-text">Secret Missions</span>
                        </a>
                    </div>
                    
                    <div class="nav-section">
                        <span class="nav-section-title">ANALYTICS</span>
                        <a href="#" class="nav-link" data-page="team-level" role="menuitem">
                            <span class="nav-icon">üìä</span><span class="nav-text">Team Levels</span>
                        </a>
                        <a href="#" class="nav-link" data-page="comparison" role="menuitem">
                            <span class="nav-icon">‚öîÔ∏è</span><span class="nav-text">Team Comparison</span>
                        </a>
                    </div>
                    
                    <div class="nav-section">
                        <span class="nav-section-title">MORE</span>
                        <a href="#" class="nav-link" data-page="chat" role="menuitem">
                            <span class="nav-icon">üí¨</span><span class="nav-text">Secret Comms</span>
                        </a>
                        <a href="#" class="nav-link" data-page="summary" role="menuitem">
                            <span class="nav-icon">üìã</span><span class="nav-text">Weekly Summary</span>
                        </a>
                        <!-- üëá YOUR NEW DRAWER LINK üëá -->
                        <a href="#" class="nav-link" data-page="drawer" role="menuitem">
                            <span class="nav-icon">üéí</span><span class="nav-text">My Drawer</span>
                        </a>
                        <a href="#" class="nav-link" data-page="announcements" role="menuitem">
                            <span class="nav-icon">üì¢</span><span class="nav-text">Announcements</span>
                        </a>
                    </div>
                    
                    <!-- Admin Link Container -->
                    <div class="nav-section nav-admin-section" id="nav-admin-container"></div>
                </nav>
            </div>

            <!-- Sidebar Footer -->
            <div class="sidebar-footer">
                <div class="sync-status">
                    <span class="sync-icon">üîÑ</span>
                    Last Sync: <span id="last-update">--:--</span>
                </div>
                <button id="logout-btn" class="btn-logout" aria-label="Logout">
                    <span class="logout-icon">üö™</span>
                    <span>Logout</span>
                </button>
            </div>
        </aside>

        <!-- Sidebar Overlay (Mobile) -->
        <div class="sidebar-overlay" id="sidebar-overlay"></div>

        <!-- Main Content Area -->
        <main class="main-content" role="main">
            <!-- Mobile Header -->
            <header class="mobile-header">
                <button id="menu-btn" class="menu-btn" aria-label="Open menu">
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                </button>
                <div class="header-logo">
                    <span class="header-logo-icon">‚ü≠‚ü¨</span>
                    <span class="header-logo-text">BTS COMEBACK MISSION</span>
                </div>
                <div class="header-spacer"></div>
            </header>

            <!-- Pages Container -->
            <div class="pages-wrapper">
                
                <!-- ==================== HOME PAGE ==================== -->
                <section id="page-home" class="page active">
                    <div class="page-header">
                        <div class="page-title-section">
                            <h1>Mission Control</h1>
                            <p id="current-week" class="page-subtitle">Week: Loading...</p>
                        </div>
                        <div class="page-actions">
                            <button class="refresh-btn" onclick="loadPage('home')" aria-label="Refresh">üîÑ</button>
                        </div>
                    </div>

                    <!-- Quick Stats & Missions -->
                    <div class="quick-stats-section"></div>
                    <div class="section-header">
                        <h2>üìã Active Missions</h2>
                    </div>
                    <div class="missions-grid"></div>

                    <!-- Top Agents -->
                    <div class="card">
                        <div class="card-header">
                            <h3><span class="header-icon">üèÜ</span> Top Agents This Week</h3>
                            <a href="#" class="card-link" onclick="loadPage('rankings'); return false;">View All ‚Üí</a>
                        </div>
                        <div class="card-body" id="home-top-agents"></div>
                    </div>

                    <!-- Team Standings -->
                    <div class="card">
                        <div class="card-header">
                            <h3><span class="header-icon">üé≠</span> Team Battle Standings</h3>
                            <a href="#" class="card-link" onclick="loadPage('comparison'); return false;">Details ‚Üí</a>
                        </div>
                        <div class="card-body" id="home-standings"></div>
                    </div>
                </section>

                <!-- ==================== DRAWER PAGE (BADGES) ==================== -->
                <!-- üëá THIS IS THE CONTAINER YOUR APP.JS NEEDS üëá -->
                <section id="page-drawer" class="page">
                    <div class="page-header">
                        <h1>My Drawer</h1>
                        <p class="page-subtitle">Your badges, achievements & history</p>
                    </div>
                    <div id="drawer-content">
                        <!-- Badges injected here -->
                    </div>
                </section>

                <!-- ==================== PROFILE PAGE ==================== -->
                <section id="page-profile" class="page">
                    <div class="page-header"><h1>Agent Profile</h1></div>
                    
                    <div class="profile-card">
                        <div class="profile-header">
                            <div class="profile-avatar" id="profile-avatar"></div>
                            <div class="profile-info">
                                <h2 id="profile-name">Agent Name</h2>
                                <p id="profile-team" class="profile-team-name">Team</p>
                                <p id="profile-id" class="profile-agent-id">Agent ID: ---</p>
                            </div>
                        </div>
                    </div>

                    <div class="stats-grid" id="profile-stats"></div>

                    <div class="card">
                        <div class="card-header"><h3><span class="header-icon">üéµ</span> Your Track Streams</h3></div>
                        <div class="card-body scrollable" id="profile-tracks"></div>
                    </div>

                    <div class="card">
                        <div class="card-header"><h3><span class="header-icon">üíø</span> Your Album Streams</h3></div>
                        <div class="card-body scrollable" id="profile-albums"></div>
                    </div>
                    
                    <!-- Backup Badge container just in case -->
                    <div class="card">
                        <div class="card-header"><h3><span class="header-icon">üéñÔ∏è</span> Badges Earned</h3></div>
                        <div class="card-body" id="profile-badges"></div>
                    </div>
                </section>

                <!-- ==================== RANKINGS PAGE ==================== -->
                <section id="page-rankings" class="page">
                    <div class="page-header">
                        <h1>Agent Rankings</h1>
                        <p class="page-subtitle">Top performers this week</p>
                    </div>
                    <div class="card"><div class="card-body" id="rankings-list"></div></div>
                </section>

                <!-- ==================== GOALS PAGE ==================== -->
                <section id="page-goals" class="page">
                    <div class="page-header"><h1>Goals Progress</h1></div>
                    <div id="goals-content"></div>
                </section>

                <!-- ==================== ALBUM 2X PAGE ==================== -->
                <section id="page-album2x" class="page">
                    <div class="page-header"><h1>Album 2X Mission</h1></div>
                    <div id="album2x-content"></div>
                </section>

                <!-- ==================== SECRET MISSIONS PAGE ==================== -->
                <section id="page-secret-missions" class="page">
                    <div class="page-header"><h1>üîí Secret Missions</h1></div>
                    <div id="secret-missions-content"></div>
                </section>

                <!-- ==================== TEAM LEVEL PAGE ==================== -->
                <section id="page-team-level" class="page">
                    <div class="page-header"><h1>Team Levels</h1></div>
                    <div id="team-level-content"></div>
                </section>

                <!-- ==================== COMPARISON PAGE ==================== -->
                <section id="page-comparison" class="page">
                    <div class="page-header"><h1>Team Comparison</h1></div>
                    <div id="comparison-content"></div>
                </section>

                <!-- ==================== SUMMARY PAGE ==================== -->
                <section id="page-summary" class="page">
                    <div class="page-header"><h1>Weekly Summary</h1></div>
                    <div id="summary-content"></div>
                </section>

                <!-- ==================== ANNOUNCEMENTS PAGE ==================== -->
                <section id="page-announcements" class="page">
                    <div class="page-header"><h1>Announcements</h1></div>
                    <div id="announcements-content"></div>
                </section>

                <!-- ==================== CHAT PAGE ==================== -->
                <section id="page-chat" class="page">
                    <div id="chat-content"></div>
                </section>

            </div>
        </main>
    </div>

    <!-- ==================== APP SCRIPT ==================== -->
    <script src="app.js"></script>
</body>
</html>
