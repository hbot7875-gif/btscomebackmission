<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üïµÔ∏è BTS SPY BATTLE - MISSION CONTROL</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- Login Screen -->
    <div id="login-screen" class="screen active">
        <div class="login-container">
            <div class="bts-logo">
                <div class="logo-glow">üïµÔ∏è</div>
                <h1 class="glitch" data-text="SPY BATTLE">SPY BATTLE</h1>
                <p class="subtitle">BTS HYUNG LINE COVERT STREAMING MISSION</p>
            </div>
            
            <div class="login-form">
                <div class="form-group">
                    <label for="agent-input">AGENT IDENTIFICATION CODE</label>
                    <input 
                        type="text" 
                        id="agent-input" 
                        placeholder="Enter Agent ID..."
                        autocomplete="off"
                    >
                    <button id="login-btn" class="btn-primary">
                        <span class="btn-text">ACCESS MISSION CONTROL</span>
                        <span class="btn-icon">‚Üí</span>
                    </button>
                </div>
                
                <div class="divider">
                    <span>ALTERNATE ACCESS</span>
                </div>
                
                <div class="form-group">
                    <label for="instagram-input">INSTAGRAM RECONNAISSANCE</label>
                    <input 
                        type="text" 
                        id="instagram-input" 
                        placeholder="Enter Instagram username..."
                        autocomplete="off"
                    >
                    <button id="find-agent-btn" class="btn-secondary">
                        <span class="btn-text">LOCATE AGENT ID</span>
                        <span class="btn-icon">üîç</span>
                    </button>
                    <div id="find-result" class="find-result"></div>
                </div>
            </div>
            
            <div class="login-footer">
                <p>üîí SECURE AUTHENTICATION REQUIRED</p>
            </div>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div id="dashboard-screen" class="screen">
        <div class="dashboard-container">
            <!-- Sidebar -->
            <aside class="sidebar" id="sidebar">
                <div class="sidebar-header">
                    <div class="logo">
                        <span class="logo-icon">üïµÔ∏è</span>
                        <span class="logo-text">SPY CONTROL</span>
                    </div>
                    <button class="sidebar-close" id="sidebar-close">‚úï</button>
                </div>
                
                <div class="agent-card">
                    <div class="agent-avatar" id="agent-avatar">
                        <span id="agent-initial">A</span>
                    </div>
                    <div class="agent-info">
                        <div class="agent-name" id="agent-name">AGENT</div>
                        <div class="agent-team" id="agent-team">TEAM</div>
                        <div class="agent-id" id="agent-id">ID: ---</div>
                    </div>
                </div>
                
                <div class="week-selector">
                    <label>üìÖ MISSION WEEK</label>
                    <select id="week-select">
                        <option>Loading...</option>
                    </select>
                </div>
                
                <nav class="nav-menu">
                    <div class="nav-section">
                        <div class="nav-title">MAIN OPERATIONS</div>
                        <a href="#" class="nav-link active" data-page="home">
                            <span class="nav-icon">üè†</span>
                            <span class="nav-text">Control Center</span>
                        </a>
                        <a href="#" class="nav-link" data-page="profile">
                            <span class="nav-icon">üë§</span>
                            <span class="nav-text">Agent Profile</span>
                        </a>
                        <a href="#" class="nav-link" data-page="rankings">
                            <span class="nav-icon">üèÜ</span>
                            <span class="nav-text">Rankings</span>
                        </a>
                    </div>
                    
                    <div class="nav-section">
                        <div class="nav-title">MISSIONS</div>
                        <a href="#" class="nav-link" data-page="goals">
                            <span class="nav-icon">üéØ</span>
                            <span class="nav-text">Goals Progress</span>
                        </a>
                        <a href="#" class="nav-link" data-page="album2x">
                            <span class="nav-icon">üíø</span>
                            <span class="nav-text">Album 2X Check</span>
                        </a>
                        <a href="#" class="nav-link" data-page="team-level">
                            <span class="nav-icon">üìä</span>
                            <span class="nav-text">Team Intel</span>
                        </a>
                    </div>
                    
                    <div class="nav-section">
                        <div class="nav-title">ANALYTICS</div>
                        <a href="#" class="nav-link" data-page="team-charts">
                            <span class="nav-icon">üìà</span>
                            <span class="nav-text">Team Charts</span>
                        </a>
                        <a href="#" class="nav-link" data-page="team-comparison">
                            <span class="nav-icon">‚öîÔ∏è</span>
                            <span class="nav-text">Comparison</span>
                        </a>
                        <a href="#" class="nav-link" data-page="summary">
                            <span class="nav-icon">üìã</span>
                            <span class="nav-text">Weekly Report</span>
                        </a>
                    </div>
                    
                    <div class="nav-section">
                        <div class="nav-title">ARCHIVES</div>
                        <a href="#" class="nav-link" data-page="drawer">
                            <span class="nav-icon">üéñÔ∏è</span>
                            <span class="nav-text">Badge Vault</span>
                        </a>
                        <a href="#" class="nav-link" data-page="announcements">
                            <span class="nav-icon">üì¢</span>
                            <span class="nav-text">Transmissions</span>
                        </a>
                    </div>
                </nav>
                
                <div class="sidebar-footer">
                    <button id="logout-btn" class="btn-logout">
                        <span class="nav-icon">üö™</span>
                        <span class="nav-text">LOGOUT</span>
                    </button>
                    <div class="update-time">
                        LAST SYNC: <span id="last-update">--:--</span>
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="main-content">
                <button class="mobile-menu-btn" id="mobile-menu-btn">‚ò∞</button>
                
                <!-- Loading Overlay -->
                <div class="loading-overlay" id="loading-overlay">
                    <div class="loader">
                        <div class="radar">
                            <div class="radar-sweep"></div>
                            <div class="radar-dot"></div>
                        </div>
                        <p>ACCESSING SECURE DATABASE...</p>
                    </div>
                </div>

                <!-- Pages Container -->
                <div class="pages-container">
                    <!-- HOME PAGE -->
                    <div class="page active" id="page-home">
                        <div class="page-header">
                            <h1 class="page-title" data-text="MISSION CONTROL">MISSION CONTROL</h1>
                            <p class="page-subtitle" id="current-week-display">Loading...</p>
                        </div>
                        
                        <div class="alert-container" id="alert-container"></div>
                        
                        <div class="hero-section">
                            <div class="hero-content">
                                <h2 class="hero-title">WELCOME BACK, OPERATIVE</h2>
                                <p class="hero-text">Your mission: Stream strategically, complete all objectives, and help your squad advance. Every 10 streams = 1 XP. Complete all 3 weekly missions to achieve clearance level up.</p>
                            </div>
                        </div>
                        
                        <div class="mission-cards">
                            <div class="mission-card" data-nav="goals">
                                <div class="mission-icon">üéµ</div>
                                <div class="mission-title">TRACK GOALS</div>
                                <p class="mission-desc">Team must complete weekly track streaming targets together</p>
                                <div class="mission-status" id="home-track-status">Loading...</div>
                            </div>
                            <div class="mission-card" data-nav="goals">
                                <div class="mission-icon">üíø</div>
                                <div class="mission-title">ALBUM GOALS</div>
                                <p class="mission-desc">Team-specific album streaming targets</p>
                                <div class="mission-status" id="home-album-status">Loading...</div>
                            </div>
                            <div class="mission-card" data-nav="album2x">
                                <div class="mission-icon">‚ú®</div>
                                <div class="mission-title">ALBUM 2X MISSION</div>
                                <p class="mission-desc">Individual mission: Each agent must stream their team album tracks at least 2√ó each</p>
                                <div class="mission-status" id="home-2x-status">Loading...</div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">üèÜ TOP OPERATIVES</h3>
                            </div>
                            <div class="card-body" id="home-top-performers">
                                <div class="loading-text">LOADING...</div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">üé≠ SQUAD STANDINGS</h3>
                            </div>
                            <div class="card-body" id="home-team-standings">
                                <div class="loading-text">LOADING...</div>
                            </div>
                        </div>
                    </div>

                    <!-- PROFILE PAGE -->
                    <div class="page" id="page-profile">
                        <div class="page-header">
                            <h1 class="page-title" data-text="AGENT DOSSIER">AGENT DOSSIER</h1>
                            <p class="page-subtitle">Your classified statistics and contributions</p>
                        </div>
                        
                        <div class="profile-hero">
                            <div class="profile-avatar" id="profile-avatar">
                                <span id="profile-initial">A</span>
                            </div>
                            <div class="profile-info">
                                <h2 class="profile-name" id="profile-name">Agent Name</h2>
                                <div class="profile-meta">
                                    <span class="profile-team" id="profile-team">Team</span>
                                    <span class="profile-separator">‚Ä¢</span>
                                    <span class="profile-id" id="profile-id">ID: ---</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stats-grid" id="profile-stats">
                            <div class="loading-text">LOADING...</div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">üéµ TRACK CONTRIBUTIONS</h3>
                            </div>
                            <div class="card-body" id="profile-tracks">
                                <div class="loading-text">LOADING...</div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">üíø ALBUM CONTRIBUTIONS</h3>
                            </div>
                            <div class="card-body" id="profile-albums">
                                <div class="loading-text">LOADING...</div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">‚ú® ALBUM 2X STATUS</h3>
                            </div>
                            <div class="card-body" id="profile-2x">
                                <div class="loading-text">LOADING...</div>
                            </div>
                        </div>
                    </div>

                    <!-- RANKINGS PAGE -->
                    <div class="page" id="page-rankings">
                        <div class="page-header">
                            <h1 class="page-title" data-text="GLOBAL RANKINGS">GLOBAL RANKINGS</h1>
                            <p class="page-subtitle">Operative leaderboard by Total XP</p>
                        </div>
                        
                        <div class="team-legend" id="team-legend"></div>
                        
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">üèÜ LEADERBOARD</h3>
                                <div class="card-actions">
                                    <input type="text" id="rank-search" placeholder="Search agent..." class="search-input">
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="table-wrapper">
                                    <table class="data-table" id="rankings-table">
                                        <thead>
                                            <tr>
                                                <th>Rank</th>
                                                <th>Agent</th>
                                                <th>Team</th>
                                                <th>Streams</th>
                                                <th>XP</th>
                                                <th>Status</th>
                                            </tr>
                                        </thead>
                                        <tbody id="rankings-body">
                                            <tr><td colspan="6" class="loading-text">LOADING...</td></tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- GOALS PAGE -->
                    <div class="page" id="page-goals">
                        <div class="page-header">
                            <h1 class="page-title" data-text="GOALS PROGRESS">GOALS PROGRESS</h1>
                            <p class="page-subtitle">Track and Album targets by squad</p>
                        </div>
                        
                        <div class="goals-container" id="goals-container">
                            <div class="loading-text">LOADING...</div>
                        </div>
                    </div>

                    <!-- ALBUM 2X PAGE -->
                    <div class="page" id="page-album2x">
                        <div class="page-header">
                            <h1 class="page-title" data-text="ALBUM 2X MISSION">ALBUM 2X MISSION</h1>
                            <p class="page-subtitle">Individual album completion status</p>
                        </div>
                        
                        <div class="album2x-container" id="album2x-container">
                            <div class="loading-text">LOADING...</div>
                        </div>
                    </div>

                    <!-- TEAM LEVEL PAGE -->
                    <div class="page" id="page-team-level">
                        <div class="page-header">
                            <h1 class="page-title" data-text="TEAM INTEL">TEAM INTEL</h1>
                            <p class="page-subtitle">Classified squad progress and mission status</p>
                        </div>
                        
                        <div class="team-level-container" id="team-level-container">
                            <div class="loading-text">LOADING...</div>
                        </div>
                    </div>

                    <!-- TEAM CHARTS PAGE -->
                    <div class="page" id="page-team-charts">
                        <div class="page-header">
                            <h1 class="page-title" data-text="TEAM ANALYTICS">TEAM ANALYTICS</h1>
                            <p class="page-subtitle">XP growth and mission completion trends</p>
                        </div>
                        
                        <div class="team-selector" id="chart-team-selector">
                            <label>SELECT SQUAD:</label>
                            <div class="team-buttons" id="team-chart-buttons"></div>
                        </div>
                        
                        <div class="charts-grid">
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">üìà SQUAD XP GROWTH</h3>
                                </div>
                                <div class="card-body">
                                    <canvas id="team-xp-chart"></canvas>
                                </div>
                            </div>
                            
                
