<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0a0a0f">
    <meta name="description" content="HopeTracker - BTS COMEBACK MISSION - Hyung Line Streaming Competition Dashboard">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    
    <title>HopeTracker | BTS COMEBACK MISSION</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Rajdhani:wght@300;400;500;600;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link rel="stylesheet" href="styles.css?v=5.1">
</head>
<body>

    <!-- ==================== LOADING OVERLAY ==================== -->
    <div id="loading" class="loading-overlay">
        <div class="loader">
            <div class="loader-ring"></div>
            <div class="loader-ring"></div>
            <div class="loader-ring"></div>
            <p>ACCESSING DATABASE...</p>
        </div>
    </div>
    
    <!-- ==================== LOGIN SCREEN ==================== -->
    <div id="login-screen" class="screen active">
        <div class="login-container">
            <div class="cyber-grid"></div>
            <div class="floating-particles">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                <span></span>
            </div>
            
            <div class="login-content">
                <div class="logo-section">
                    <div class="bts-logo">‚ü≠‚ü¨</div>
                    <h1 class="title">BTS COMEBACK MISSION</h1>
                    <p class="subtitle">HYUNG LINE EDITION</p>
                    <!-- HopeTracker - Minimal below logo -->
                    <div class="powered-by">
                        <span class="powered-line"></span>
                        <span class="powered-text">HopeTracker</span>
                        <span class="powered-line"></span>
                    </div>
                </div>

                <div class="login-box">
                    <form id="login-form">
                        <div class="input-group">
                            <!-- Agent ID Input -->
                            <label for="agent-input">
                                <span class="label-icon">üÜî</span> AGENT IDENTIFICATION
                            </label>
                            <div class="input-wrapper">
                                <input type="text" id="agent-input" placeholder="Enter Agent Number (e.g., AGENT001)" autocomplete="off">
                                <span class="input-icon">üë§</span>
                            </div>

                            <!-- Password Input -->
                            <label for="password-input" style="margin-top: 15px;">
                                <span class="label-icon">üîë</span> ACCESS KEY
                            </label>
                            <div class="input-wrapper">
                                <input type="password" id="password-input" placeholder="Enter Password" autocomplete="current-password">
                                <span class="input-icon">üîí</span>
                            </div>

                            <!-- Login Button -->
                            <button type="submit" id="login-btn" class="btn-primary" style="margin-top: 20px;">
                                <span class="btn-text">AUTHENTICATE</span>
                                <span class="btn-icon">‚Üí</span>
                            </button>
                        </div>
                    </form>

                    <div class="divider">
                        <span class="divider-line"></span>
                        <span class="divider-text">OR</span>
                        <span class="divider-line"></span>
                    </div>

                    <form id="find-form">
                        <div class="input-group">
                            <label for="instagram-input">
                                <span class="label-icon">üì±</span> FIND AGENT ID
                            </label>
                            <div class="input-wrapper">
                                <input type="text" id="instagram-input" placeholder="Enter Instagram username..." autocomplete="off">
                                <span class="input-icon">@</span>
                            </div>
                            <button type="submit" id="find-btn" class="btn-secondary">
                                <span class="btn-text">LOOKUP ID</span>
                                <span class="btn-icon">üîç</span>
                            </button>
                        </div>
                    </form>
                    <div id="find-result" class="result-box"></div>
                </div>

                <div class="login-footer">
                    <div class="connection-status">
                        <div class="pulse-dot"></div>
                        <span>SYSTEM ONLINE</span>
                    </div>
                    <div class="version-info">v5.0 | Hopetracker</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== DASHBOARD SCREEN ==================== -->
    <div id="dashboard-screen" class="screen">
        
        <!-- ==================== SIDEBAR ==================== -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo-container">
                    <div class="logo-symbol">‚ü≠‚ü¨</div>
                    <div class="logo-text-group">
                        <span class="logo-title">BTS COMEBACK</span>
                        <span class="logo-subtitle">MISSION</span>
                    </div>
                </div>
                <button type="button" id="close-sidebar" class="close-btn">‚úï</button>
            </div>

            <div class="agent-card">
                <div class="agent-avatar" id="agent-avatar"></div>
                <div class="agent-details">
                    <div class="agent-name" id="agent-name">Agent</div>
                    <div class="agent-team" id="agent-team">Team</div>
                    <div class="agent-id" id="agent-id">ID: ---</div>
                </div>
            </div>

            <div class="week-selector">
                <label for="week-select">
                    <span class="selector-icon">üìÖ</span> MISSION WEEK
                </label>
                <div class="select-wrapper">
                    <select id="week-select"></select>
                    <span class="select-arrow">‚ñº</span>
                </div>
            </div>

            <nav class="nav-links">
                
                <!-- MAIN -->
                <div class="nav-section">
                    <span class="nav-section-title">MAIN</span>
                    
                    <a href="#" class="nav-link active" data-page="home">
                        <span class="nav-icon">üè†</span>
                        <span class="nav-text">Mission Control</span>
                    </a>
                    
                    <a href="#" class="nav-link" data-page="guide">
                        <span class="nav-icon">üìö</span>
                        <span class="nav-text">Agent Manual</span>
                    </a>
                    
                    <a href="#" class="nav-link" data-page="profile">
                        <span class="nav-icon">üë§</span>
                        <span class="nav-text">My Profile</span>
                    </a>

                    <a href="#" class="nav-link" data-page="drawer">
                        <span class="nav-icon">üéí</span>
                        <span class="nav-text">Badge Drawer</span>
                        <span class="notification-dot" id="dot-drawer"></span>
                    </a>
                </div>
                
                <!-- MISSIONS -->
                <div class="nav-section">
                    <span class="nav-section-title">MISSIONS</span>
                    
                    <a href="#" class="nav-link" data-page="goals">
                        <span class="nav-icon">üéØ</span>
                        <span class="nav-text">Goal Progress</span>
                    </a>

                    <a href="#" class="nav-link" data-page="namjoon">
                        <span class="nav-icon">üß†</span>
                        <span class="nav-text">The 148 Protocol</span>
                    </a>
                    
                    <a href="#" class="nav-link" data-page="album2x">
                        <span class="nav-icon">üíø</span>
                        <span class="nav-text">Album 2X</span>
                    </a>
                    
                    <a href="#" class="nav-link" data-page="secret-missions">
                        <span class="nav-icon">üîí</span>
                        <span class="nav-text">Secret Missions</span>
                        <span class="notification-dot" id="dot-mission"></span>
                    </a>

                    <a href="#" class="nav-link" data-page="sotd">
                        <span class="nav-icon">üé¨</span>
                        <span class="nav-text">Song of Day</span>
                        <span class="notification-dot" id="dot-sotd"></span>
                    </a>
                </div>
                
                <!-- INTEL -->
                <div class="nav-section">
                    <span class="nav-section-title">INTEL</span>
                    
                    <a href="#" class="nav-link" data-page="rankings">
                        <span class="nav-icon">üèÜ</span>
                        <span class="nav-text">Rankings</span>
                    </a>

                    <a href="#" class="nav-link" data-page="team-level">
                        <span class="nav-icon">üìä</span>
                        <span class="nav-text">Team Levels</span>
                    </a>

                    <a href="#" class="nav-link" data-page="attendance">
                        <span class="nav-icon">üìã</span>
                        <span class="nav-text">Operative Database</span>
                    </a>
                    
                    <a href="#" class="nav-link" data-page="comparison">
                        <span class="nav-icon">‚öîÔ∏è</span>
                        <span class="nav-text">Comparison</span>
                    </a>
                </div>
                
                <!-- COMMS & TOOLS -->
                <div class="nav-section">
                    <span class="nav-section-title">COMMS &amp; TOOLS</span>
                    
                    <a href="#" class="nav-link" data-page="playlists">
                        <span class="nav-icon">üéß</span>
                        <span class="nav-text">Playlists</span>
                    </a>

                    <a href="#" class="nav-link" data-page="streaming-tips">
                        <span class="nav-icon">üì°</span>
                        <span class="nav-text">Streaming Tips</span>
                    </a>
                    
                    <a href="#" class="nav-link" data-page="chat">
                        <span class="nav-icon">üí¨</span>
                        <span class="nav-text">Secret Comms</span>
                        <span class="notification-dot" id="dot-chat"></span>
                    </a>

                    <a href="#" class="nav-link" data-page="gc-links">
                        <span class="nav-icon">üîó</span>
                        <span class="nav-text">Group Chats</span>
                    </a>
                    
                    <a href="#" class="nav-link" data-page="announcements">
                        <span class="nav-icon">üì¢</span>
                        <span class="nav-text">Announcements</span>
                        <span class="notification-dot" id="dot-announce"></span>
                    </a>

                    <a href="#" class="nav-link" data-page="summary">
                        <span class="nav-icon">üìã</span>
                        <span class="nav-text">Weekly Results</span>
                        <span class="notification-dot" id="dot-summary"></span>
                    </a>
                </div>

                <!-- ARIRANG -->
                <div class="nav-section">
                    <span class="nav-section-title">ARIRANG</span>
                    
                    <a href="#" class="nav-link" data-page="arirang-hype">
                        <span class="nav-icon">üî•</span>
                        <span class="nav-text">Hype Force</span>
                    </a>
                    
                    <a href="#" class="nav-link" data-page="arirang-vault">
                        <span class="nav-icon">üóÑÔ∏è</span>
                        <span class="nav-text">Arirang Vault</span>
                    </a>
                </div>
                
            </nav>

            <button type="button" id="logout-btn">
                <span class="logout-icon">‚èª</span> LOGOUT
            </button>
            
            <!-- Minimal HopeTracker in sidebar -->
            <div class="sidebar-credit">HopeTracker</div>
        </aside>

        <div class="sidebar-overlay" id="sidebar-overlay"></div>
        
        <!-- ==================== MAIN CONTENT AREA ==================== -->
        <main class="main-content">
            <header class="mobile-header">
                <button type="button" id="menu-btn" class="menu-btn">
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                </button>
                <div class="header-logo">
                    <span class="header-logo-icon">‚ü≠‚ü¨</span>
                    <span class="header-logo-text">BTS COMEBACK MISSION</span>
                </div>
            </header>

            <div class="pages-wrapper">
                
                <!-- HOME -->
                <section id="page-home" class="page active">
                    <div class="page-header">
                        <div class="page-title-section">
                            <h1>Mission Control</h1>
                            <p id="current-week" class="page-subtitle">Week: Loading...</p>
                        </div>
                        <div class="page-actions">
                            <button type="button" class="refresh-btn" onclick="loadPage('home')" title="Refresh Data">üîÑ</button>
                        </div>
                    </div>
                    <div class="quick-stats-section"></div>
                    <div class="section-header">
                        <h2>üìã Active Missions</h2>
                    </div>
                    <div class="missions-grid"></div>
                    <div class="card">
                        <div class="card-header">
                            <h3><span class="header-icon">üèÜ</span> Top Agents</h3>
                            <button type="button" class="card-link" onclick="loadPage('rankings')">View All ‚Üí</button>
                        </div>
                        <div class="card-body" id="home-top-agents"></div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <h3><span class="header-icon">üé≠</span> Battle Standings</h3>
                            <button type="button" class="card-link" onclick="loadPage('comparison')">Details ‚Üí</button>
                        </div>
                        <div class="card-body" id="home-standings"></div>
                    </div>
                </section>

                <!-- GUIDE -->
                <section id="page-guide" class="page">
                    <div class="page-header">
                        <h1>üìö Agent Manual</h1>
                    </div>
                    <div id="guide-content"></div>
                </section>

                <!-- PROFILE -->
                <section id="page-profile" class="page">
                    <div class="page-header">
                        <h1>üë§ Agent Profile</h1>
                        <button type="button" id="syncBtn" class="sync-button" onclick="handleManualSync()">
                            <span class="sync-icon">üîÑ</span>
                            <span class="sync-text">Sync Stats</span>
                        </button>
                    </div>
                    <div class="profile-card">
                        <div class="profile-header">
                            <div class="profile-avatar" id="profile-avatar"></div>
                            <div class="profile-info">
                                <h2 id="profile-name">Agent Name</h2>
                                <p id="profile-team" class="profile-team-name">Team</p>
                                <p id="profile-id" class="profile-agent-id">ID: ---</p>
                                
                                <!-- Change Password Button -->
                                <button type="button" onclick="openPasswordModal()" class="change-password-btn">
                                    ‚öôÔ∏è CHANGE ACCESS KEY
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="stats-grid" id="profile-stats"></div>
                    <div class="card">
                        <div class="card-header">
                            <h3><span class="header-icon">üéµ</span> Track Streams</h3>
                        </div>
                        <div class="card-body scrollable" id="profile-tracks"></div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <h3><span class="header-icon">üíø</span> Album Streams</h3>
                        </div>
                        <div class="card-body scrollable" id="profile-albums"></div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <h3><span class="header-icon">üéñÔ∏è</span> Badges</h3>
                        </div>
                        <div class="card-body" id="profile-badges"></div>
                    </div>
                </section>

                <!-- GOALS -->
                <section id="page-goals" class="page">
                    <div class="page-header">
                        <h1>üéØ Goals Progress</h1>
                    </div>
                    <div id="goals-content"></div>
                </section>

                <!-- NAMJOON'S BRAIN -->
                <section id="page-namjoon" class="page">
                    <div class="page-header">
                        <h1>üß† The 148 Protocol</h1>
                        <p class="page-subtitle">Strategic Analysis</p>
                    </div>
                    <div id="namjoon-content"></div>
                </section>

                <!-- ALBUM 2X -->
                <section id="page-album2x" class="page">
                    <div class="page-header">
                        <h1>üíø Album 2X Mission</h1>
                    </div>
                    <div id="album2x-content"></div>
                </section>

                <!-- SECRET MISSIONS -->
                <section id="page-secret-missions" class="page">
                    <div class="page-header">
                        <h1>üîí Secret Missions</h1>
                    </div>
                    <div id="secret-missions-content"></div>
                </section>

                <!-- SOTD -->
                <section id="page-sotd" class="page">
                    <div class="page-header">
                        <h1>üé¨ Song of the Day</h1>
                    </div>
                    <div id="sotd-content"></div>
                </section>

                <!-- RANKINGS -->
                <section id="page-rankings" class="page">
                    <div class="page-header">
                        <h1>üèÜ Rankings</h1>
                    </div>
                    <div id="rankings-list"></div>
                </section>

                <!-- TEAM LEVEL -->
                <section id="page-team-level" class="page">
                    <div class="page-header">
                        <h1>üìä Team Levels</h1>
                    </div>
                    <div id="team-level-content"></div>
                </section>

                <!-- COMPARISON -->
                <section id="page-comparison" class="page">
                    <div class="page-header">
                        <h1>‚öîÔ∏è Team Comparison</h1>
                    </div>
                    <div id="comparison-content"></div>
                </section>

                <!-- PLAYLISTS -->
                <section id="page-playlists" class="page">
                    <div class="page-header">
                        <h1>üéß Playlists</h1>
                    </div>
                    <div id="playlists-content"></div>
                </section>

                <!-- CHAT -->
                <section id="page-chat" class="page">
                    <div class="page-header">
                        <h1>üí¨ Secret Comms</h1>
                    </div>
                    <div id="chat-content"></div>
                </section>

                <!-- ANNOUNCEMENTS -->
                <section id="page-announcements" class="page">
                    <div class="page-header">
                        <h1>üì¢ Announcements</h1>
                    </div>
                    <div id="announcements-content"></div>
                </section>

                <!-- GC LINKS -->
                <section id="page-gc-links" class="page">
                    <div class="page-header">
                        <h1>üîó GC Links</h1>
                    </div>
                    <div id="gc-links-content"></div>
                </section>

                <!-- HELPER ROLES -->
                <section id="page-helper-roles" class="page">
                    <div class="page-header">
                        <h1>üéñÔ∏è Helper Roles</h1>
                    </div>
                    <div id="helper-roles-content"></div>
                </section>

                <!-- DRAWER -->
                <section id="page-drawer" class="page">
                    <div class="page-header">
                        <h1>üéí My Drawer</h1>
                    </div>
                    <div id="drawer-content"></div>
                </section>

                <!-- SUMMARY -->
                <section id="page-summary" class="page">
                    <div class="page-header">
                        <h1>üìã Weekly Summary</h1>
                    </div>
                    <div id="summary-content"></div>
                </section>

                <!-- ATTENDANCE / OPERATIVE DATABASE -->
                <section id="page-attendance" class="page">
                    <div class="page-header">
                        <h1>üìã Operative Database</h1>
                    </div>
                    <div id="attendance-content"></div>
                </section>

                <!-- STREAMING TIPS -->
                <section id="page-streaming-tips" class="page">
                    <div class="page-header">
                        <h1>üì° Streaming Protocols</h1>
                        <p class="page-subtitle">Official Spotify Guidelines</p>
                    </div>
                    
                    <div id="tips-container">
                        <div class="card tip-card tip-album">
                            <div class="card-body">
                                <h3>üíø Album Streaming</h3>
                                <p>Top-to-bottom streaming is recommended. If repeating an album, play other songs or playlists in between.</p>
                            </div>
                        </div>

                        <div class="card tip-card tip-warning">
                            <div class="card-body">
                                <h3>‚ö†Ô∏è Artist Looping Warning</h3>
                                <p>Playing the same artist continuously can reduce recommendations. Balanced listening protects long-term performance.</p>
                            </div>
                        </div>

                        <div class="card tip-card tip-reuse">
                            <div class="card-body">
                                <h3>üîÑ Reusing Playlists</h3>
                                <p>You can reuse playlists on the same day. Just avoid constant repetition and switch between albums/playlists.</p>
                            </div>
                        </div>

                        <div class="card tip-card tip-night">
                            <div class="card-body">
                                <h3>üåô Night Streaming</h3>
                                <p>Queue 2-3 shorter playlists if you can't interact for 2-3 hours. <strong>Turn Autoplay OFF</strong> to avoid random playback.</p>
                            </div>
                        </div>

                        <div class="card tip-card tip-volume">
                            <div class="card-body">
                                <h3>üîä Volume Matters</h3>
                                <p>Keep volume at <strong>50% or higher</strong>. Muted playback or extremely low volume may be filtered as low-quality streams.</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- ARIRANG HYPE FORCE -->
                <section id="page-arirang-hype" class="page">
                    <div class="page-header">
                        <h1>üî• Hype Force</h1>
                        <p class="page-subtitle">Amplify the Purple Wave</p>
                    </div>
                    <div id="arirang-hype-content"></div>
                </section>

                <!-- ARIRANG VAULT -->
                <section id="page-arirang-vault" class="page">
                    <div class="page-header">
                        <h1>üóÑÔ∏è Arirang Vault</h1>
                        <p class="page-subtitle">Archive & Resources</p>
                    </div>
                    <div id="arirang-vault-content"></div>
                </section>

            </div><!-- END pages-wrapper -->
        </main>

        <!-- ==================== FLOATING SYNC BUTTON ==================== -->
        <button type="button" id="floatingSyncBtn" class="floating-sync-btn" onclick="handleManualSync()" title="Sync Stats from Last.fm">
            üîÑ
        </button>

    </div><!-- END dashboard-screen -->

    <!-- ==================== PASSWORD CHANGE MODAL ==================== -->
    <div id="password-modal" class="modal-overlay" hidden>
        <div class="password-modal-content">
            <div class="password-modal-header">
                <div class="modal-title-group">
                    <span class="modal-icon">üîê</span>
                    <h3>Change Access Key</h3>
                </div>
                <button type="button" class="modal-close-btn" onclick="closePasswordModal()">‚úï</button>
            </div>
            
            <form id="password-form">
                <div class="password-modal-body">
                    <div class="modal-input-group">
                        <label for="current-password">
                            <span class="input-label-icon">üîë</span>
                            Current Password
                        </label>
                        <div class="modal-input-wrapper">
                            <input type="password" id="current-password" required placeholder="Enter current password" autocomplete="current-password">
                            <button type="button" class="toggle-password" onclick="togglePasswordVisibility('current-password', this)">üëÅÔ∏è</button>
                        </div>
                    </div>
                    
                    <div class="modal-input-group">
                        <label for="new-password">
                            <span class="input-label-icon">üîí</span>
                            New Password
                        </label>
                        <div class="modal-input-wrapper">
                            <input type="password" id="new-password" required placeholder="Enter new password (min 6 chars)" minlength="6" autocomplete="new-password">
                            <button type="button" class="toggle-password" onclick="togglePasswordVisibility('new-password', this)">üëÅÔ∏è</button>
                        </div>
                        <div class="password-strength" id="password-strength"></div>
                    </div>
                    
                    <div class="modal-input-group">
                        <label for="confirm-password">
                            <span class="input-label-icon">‚úì</span>
                            Confirm New Password
                        </label>
                        <div class="modal-input-wrapper">
                            <input type="password" id="confirm-password" required placeholder="Confirm new password" autocomplete="new-password">
                            <button type="button" class="toggle-password" onclick="togglePasswordVisibility('confirm-password', this)">üëÅÔ∏è</button>
                        </div>
                        <div class="password-match" id="password-match"></div>
                    </div>
                </div>
                
                <div class="password-modal-footer">
                    <button type="button" class="btn-cancel" onclick="closePasswordModal()">
                        Cancel
                    </button>
                    <button type="submit" class="btn-confirm" id="submit-password-btn">
                        <span class="btn-text">Update Password</span>
                        <span class="btn-loader" style="display: none;">‚è≥</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- ==================== TOAST CONTAINER ==================== -->
    <div id="toast-container"></div>
    
    <!-- ==================== GENERIC MODAL ==================== -->
    <div id="modal-container" class="modal-container" hidden>
        <div class="modal-overlay-bg"></div>
        <div class="modal-content">
            <button type="button" class="modal-close">‚úï</button>
            <div class="modal-body" id="modal-body"></div>
        </div>
    </div>

    <!-- ==================== LIBRARIES ==================== -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <!-- ==================== APP SCRIPT ==================== -->
    <script src="app.js?v=5.1"></script>
</body>
</html>
